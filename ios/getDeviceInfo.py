DEVICE_CPU_CORES = {
    # iPhone
    "iPhone1,1": 1,  # iPhone (Original)
    "iPhone1,2": 1,  # iPhone 3G
    "iPhone2,1": 1,  # iPhone 3GS
    "iPhone3,1": 1,  # iPhone 4 (GSM)
    "iPhone3,2": 1,  # iPhone 4 (GSM Rev A)
    "iPhone3,3": 1,  # iPhone 4 (CDMA)
    "iPhone4,1": 2,  # iPhone 4S
    "iPhone5,1": 2,  # iPhone 5 (GSM)
    "iPhone5,2": 2,  # iPhone 5 (Global)
    "iPhone5,3": 2,  # iPhone 5C (GSM)
    "iPhone5,4": 2,  # iPhone 5C (Global)
    "iPhone6,1": 2,  # iPhone 5S (GSM)
    "iPhone6,2": 2,  # iPhone 5S (Global)
    "iPhone7,2": 2,  # iPhone 6
    "iPhone7,1": 2,  # iPhone 6 Plus
    "iPhone8,1": 2,  # iPhone 6S
    "iPhone8,2": 2,  # iPhone 6S Plus
    "iPhone8,4": 2,  # iPhone SE (1st generation)
    "iPhone9,1": 4,  # iPhone 7
    "iPhone9,3": 4,  # iPhone 7
    "iPhone9,2": 4,  # iPhone 7 Plus
    "iPhone9,4": 4,  # iPhone 7 Plus
    "iPhone10,1": 6,  # iPhone 8
    "iPhone10,4": 6,  # iPhone 8
    "iPhone10,2": 6,  # iPhone 8 Plus
    "iPhone10,5": 6,  # iPhone 8 Plus
    "iPhone10,3": 6,  # iPhone X
    "iPhone10,6": 6,  # iPhone X
    "iPhone11,8": 6,  # iPhone XR
    "iPhone11,2": 6,  # iPhone XS
    "iPhone11,6": 6,  # iPhone XS Max
    "iPhone11,4": 6,  # iPhone XS Max
    "iPhone12,1": 6,  # iPhone 11
    "iPhone12,3": 6,  # iPhone 11 Pro
    "iPhone12,5": 6,  # iPhone 11 Pro Max
    "iPhone12,8": 6,  # iPhone SE (2nd generation)
    "iPhone13,1": 6,  # iPhone 12 mini
    "iPhone13,2": 6,  # iPhone 12
    "iPhone13,3": 6,  # iPhone 12 Pro
    "iPhone13,4": 6,  # iPhone 12 Pro Max
    "iPhone14,4": 6,  # iPhone 13 mini
    "iPhone14,5": 6,  # iPhone 13
    "iPhone14,2": 6,  # iPhone 13 Pro
    "iPhone14,3": 6,  # iPhone 13 Pro Max
    "iPhone14,6": 6,  # iPhone SE (3rd generation)
    "iPhone14,7": 6,  # iPhone 14
    "iPhone14,8": 6,  # iPhone 14 Plus
    "iPhone15,2": 6,  # iPhone 14 Pro
    "iPhone15,3": 6,  # iPhone 14 Pro Max

    # iPad
    "iPad1,1": 1,  # iPad (Original)
    "iPad2,1": 2,  # iPad 2 (Wi-Fi)
    "iPad2,2": 2,  # iPad 2 (GSM)
    "iPad2,3": 2,  # iPad 2 (CDMA)
    "iPad2,4": 2,  # iPad 2 (Rev A)
    "iPad3,1": 2,  # iPad (3rd generation) (Wi-Fi)
    "iPad3,2": 2,  # iPad (3rd generation) (CDMA)
    "iPad3,3": 2,  # iPad (3rd generation) (GSM)
    "iPad3,4": 2,  # iPad (4th generation) (Wi-Fi)
    "iPad3,5": 2,  # iPad (4th generation) (GSM)
    "iPad3,6": 2,  # iPad (4th generation) (CDMA)
    "iPad4,1": 2,  # iPad Air (Wi-Fi)
    "iPad4,2": 2,  # iPad Air (Cellular)
    "iPad4,3": 2,  # iPad Air (China)
    "iPad5,3": 2,  # iPad Air 2 (Wi-Fi)
    "iPad5,4": 2,  # iPad Air 2 (Cellular)
    "iPad6,11": 2,  # iPad (5th generation) (Wi-Fi)
    "iPad6,12": 2,  # iPad (5th generation) (Cellular)
    "iPad7,5": 2,  # iPad (6th generation) (Wi-Fi)
    "iPad7,6": 2,  # iPad (6th generation) (Cellular)
    "iPad7,11": 2,  # iPad (7th generation) (Wi-Fi)
    "iPad7,12": 2,  # iPad (7th generation) (Cellular)
    "iPad11,6": 4,  # iPad (8th generation) (Wi-Fi)
    "iPad11,7": 4,  # iPad (8th generation) (Cellular)
    "iPad12,1": 6,  # iPad (9th generation) (Wi-Fi)
    "iPad12,2": 6,  # iPad (9th generation) (Cellular)
    "iPad13,18": 6,  # iPad (10th generation) (Wi-Fi)
    "iPad13,19": 6,  # iPad (10th generation) (Wi-Fi + Cellular)

    # iPad Mini
    "iPad2,5": 2,  # iPad mini (Wi-Fi)
    "iPad2,6": 2,  # iPad mini (GSM)
    "iPad2,7": 2,  # iPad mini (CDMA)
    "iPad4,4": 2,  # iPad mini 2 (Wi-Fi)
    "iPad4,5": 2,  # iPad mini 2 (Cellular)
    "iPad4,6": 2,  # iPad mini 2 (China)
    "iPad4,7": 2,  # iPad mini 3 (Wi-Fi)
    "iPad4,8": 2,  # iPad mini 3 (Cellular)
    "iPad4,9": 2,  # iPad mini 3 (China)
    "iPad5,1": 2,  # iPad mini 4 (Wi-Fi)
    "iPad5,2": 2,  # iPad mini 4 (Cellular)
    "iPad11,1": 4,  # iPad mini (5th generation) (Wi-Fi)
    "iPad11,2": 4,  # iPad mini (5th generation) (Cellular)
    "iPad14,1": 6,  # iPad mini (6th generation) (Wi-Fi)
    "iPad14,2": 6,  # iPad mini (6th generation) (Cellular)

    # iPad Pro
    "iPad6,3": 2,  # iPad Pro (9.7-inch) (Wi-Fi)
    "iPad6,4": 2,  # iPad Pro (9.7-inch) (Cellular)
    "iPad6,7": 4,  # iPad Pro (12.9-inch) (Wi-Fi)
    "iPad6,8": 4,  # iPad Pro (12.9-inch) (Cellular)
    "iPad7,1": 4,  # iPad Pro (12.9-inch) (2nd generation) (Wi-Fi)
    "iPad7,2": 4,  # iPad Pro (12.9-inch) (2nd generation) (Cellular)
    "iPad7,3": 4,  # iPad Pro (10.5-inch) (Wi-Fi)
    "iPad7,4": 4,  # iPad Pro (10.5-inch) (Cellular)
    "iPad8,1": 8,  # iPad Pro (11-inch) (2018) (Wi-Fi)
    "iPad8,2": 8,  # iPad Pro (11-inch) (2018) (Wi-Fi)
    "iPad8,3": 8,  # iPad Pro (11-inch) (2018) (Cellular)
    "iPad8,4": 8,  # iPad Pro (11-inch) (2018) (Cellular)
    "iPad8,5": 8,  # iPad Pro (12.9-inch) (2018) (Wi-Fi)
    "iPad8,6": 8,  # iPad Pro (12.9-inch) (2018) (Wi-Fi)
    "iPad8,7": 8,  # iPad Pro (12.9-inch) (2018) (Cellular)
    "iPad8,8": 8,  # iPad Pro (12.9-inch) (2018) (Cellular)
    "iPad8,9": 8,  # iPad Pro (11-inch) (2nd generation) (Wi-Fi)
    "iPad8,10": 8,  # iPad Pro (11-inch) (2nd generation) (Cellular)
    "iPad8,11": 8,  # iPad Pro (12.9-inch) (4th generation) (Wi-Fi)
    "iPad8,12": 8,  # iPad Pro (12.9-inch) (4th generation) (Cellular)
    "iPad13,4": 8,  # iPad Pro (11-inch) (3rd generation) (Wi-Fi)
    "iPad13,5": 8,  # iPad Pro (11-inch) (3rd generation) (Wi-Fi)
    "iPad13,6": 8,  # iPad Pro (11-inch) (3rd generation) (Cellular)
    "iPad13,7": 8,  # iPad Pro (11-inch) (3rd generation) (Cellular)
    "iPad13,8": 8,  # iPad Pro (12.9-inch) (5th generation) (Wi-Fi)
    "iPad13,9": 8,  # iPad Pro (12.9-inch) (5th generation) (Wi-Fi)
    "iPad13,10": 8,  # iPad Pro (12.9-inch) (5th generation) (Cellular)
    "iPad13,11": 8,  # iPad Pro (12.9-inch) (5th generation) (Cellular)
    "iPad14,3": 6,  # iPad Pro (11-inch) (4th generation) (Wi-Fi)
    "iPad14,4": 6,  # iPad Pro (11-inch) (4th generation) (Wi-Fi + Cellular)
    "iPad14,5": 6,  # iPad Pro (12.9-inch) (6th generation) (Wi-Fi)
    "iPad14,6": 6,  # iPad Pro (12.9-inch) (6th generation) (Wi-Fi + Cellular)
}


# 示例：获取设备信息并找到CPU核数
def get_iphone_info():
    import subprocess
    try:
        result = subprocess.run(['ideviceinfo'], stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=True)
        if result.returncode != 0:
            raise Exception(f"Error getting device info: {result.stderr}")

        device_info = {}
        for line in result.stdout.splitlines():
            key, _, value = line.partition(':')
            device_info[key.strip()] = value.strip()

        return device_info
    except Exception as e:
        print(f"Failed to get iPhone info: {e}")
        return None


def get_cpu_cores(device_model):
    return DEVICE_CPU_CORES.get(device_model, "Unknown")


def cpu_cores():
    iphone_info = get_iphone_info()
    if iphone_info:
        device_model = iphone_info.get("ProductType")
        cpu_cores = get_cpu_cores(device_model)
        print(f"Device Model: {device_model}, CPU Cores: {cpu_cores}")
    else:
        print("No iPhone connected or failed to retrieve information.")
    return  cpu_cores
